<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<meta http-equiv="Cache-Control" content="no-cache">
<title>Настройка записи</title>
<link href="jquery-mobile/jquery.mobile.structure.min.css" rel="stylesheet" type="text/css">
<link href="jquery-mobile/jquery.mobile.theme.min.css" rel="stylesheet" type="text/css">
<script src="jquery-mobile/jquery-1.11.3.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile.min.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="js/ini.js"></script>
<script language="javascript" type="text/javascript" src="js/inin.js"></script>
<script language="javascript" type="text/javascript" src="js/date.js"></script>
<script language="javascript" type="text/javascript" src="js/range.js"></script>
</head>
<body onload="ini()">
<div data-role="page">
  <div data-role="header" data-position="fixed">
    <h1>Настройка записи</h1>
  </div>
  <div data-role="content">
  <div data-role="fieldcontain">
      
      <input type="text" class="timetext" name="timetext" id="timetext" value=""  />
  </div>
  <form id="forms3" method="post" action="javascript:void(null);" onsubmit="call3()">
  <div data-role="collapsible" data-collapsed="true">
  <h1>Установка времени</h1>
  <!-- <div data-role="fieldcontain">
      <label for="date">Дата:</label>
      <input type="date" name="date" id="date" value=""  />
  </div>
  <div data-role="fieldcontain">
      <label for="time">Время:</label>
      <input type="time" class="time" name="time" id="time" value=""  />
  </div> -->
<a href="timedata.html" data-rel="dialog" data-role="button"  data-transition="flip">Изменить время</a>   
<div data-role="rangeslider" data-track-theme="a" data-theme="b">
        <label for="rangea">Время дня</label>
        <input name="rangea" id="rangea" min="0" max="24" value="06" type="range">
        <label for="rangeb">Время дня</label>
        <input name="rangeb" id="rangeb" min="0" max="24" value="20" type="range">
    </div>
  <input type="submit" value="Сохранить" data-icon="arrow-r" data-iconpos="right"/>
  </div>
   </form>
	
 <form id="forms" method="post" action="javascript:void(null);" onsubmit="call()">
  <div data-role="collapsible">
  <h1>Запись в локальное хранилище</h1>
  <div data-role="fieldcontain">
    <label for="rec_st">Запись в локальное хранилище</label>
    <select name="rec_st" id="rec_st" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
	
	<div data-role="collapsible" data-collapsed="true">
  <h1>Настройки записи по движению</h1>

  <fieldset data-role="collapsible">
  <legend>День</legend>
  <div data-role="fieldcontain">
    <label for="zap_dv_day_st">Запись по движению</label>
    <select name="zap_dv_day_st" id="zap_dv_day_st" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  
  <div data-role="fieldcontain">
    <label for="dlit_rol_dv_day_st">Длина записи (с)</label>
    <input type="number" name="dlit_rol_dv_day_st" placeholder="4" id="dlit_rol_dv_day_st" value="4"  />
  </div>
  
  </fieldset>

<fieldset data-role="collapsible">
  <legend>Ночь</legend>
  <div data-role="fieldcontain">
    <label for="zap_dv_night_st">Запись по движению</label>
    <select name="zap_dv_night_st" id="zap_dv_night_st" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  <div data-role="fieldcontain">
    <label for="dlit_rol_dv_night_st">Длина записи (с)</label>
    <input type="number" name="dlit_rol_dv_night_st" placeholder="4" id="dlit_rol_dv_night_st" value="4"  />
  </div>
  </fieldset>
</div>

   <div data-role="collapsible" data-collapsed="true">
  <h1>Настройка периодической записи</h1>
   <fieldset data-role="collapsible">
  <legend>День</legend>
  <div data-role="fieldcontain">
    <label for="per_zap_vkl_day_st">Периодическая запись</label>
    <select name="per_zap_vkl_day_st" id="per_zap_vkl_day_st" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  <div data-role="fieldcontain">
    <label for="per_zap_day_st">Период записи, через (с)</label>
    <input type="number" name="per_zap_day_st" id="per_zap_day_st" placeholder="120" value="120"  />
  </div>
  <div data-role="fieldcontain">
    <label for="prod_per_day_st">Длина записи (с)</label>
    <input type="number" name="prod_per_day_st" placeholder="4" id="prod_per_day_st" value="4"  />
  </div>
  </fieldset>

<fieldset data-role="collapsible">
  <legend>Ночь</legend>
  <div data-role="fieldcontain">
    <label for="per_zap_vkl_night_st">Периодическая запись</label>
    <select name="per_zap_vkl_night_st" id="per_zap_vkl_night_st" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  <div data-role="fieldcontain">
    <label for="per_zap_night_st">Период записи, через (с)</label>
    <input type="number" name="per_zap_night_st" id="per_zap_night_st" placeholder="120" value="120"  />
  </div>
  <div data-role="fieldcontain">
    <label for="prod_per_night_st">Длина записи (с)</label>
    <input type="number" name="prod_per_night_st" placeholder="4" id="prod_per_night_st" value="4"  />
  </div>
  </fieldset>
  
</div>
<input type="submit" value="Сохранить" data-icon="arrow-r"  data-iconpos="right"/>
</div>
</form>



<form id="forms1" method="post" action="javascript:void(null);" onsubmit="call1()">
  <div data-role="collapsible" data-collapsed="true">
  <h1>Запись в облачное хранилище</h1>
  <div data-role="fieldcontain">
    <label for="rec_cl">Запись в облачное хранилище</label>
    <select name="rec_cl" id="rec_cl" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>

  <fieldset data-role="collapsible">
  <legend>Настройки облачного сервиса</legend>
  
  <div data-role="fieldcontain">
    <label for="service" class="select">Сервис</label>
    <select name="service" id="service">
      <option value="1">Яндекс.Диск</option>
      <option value="2" disabled>Google Drive</option>
      <option value="3" disabled>Облако@mail.ru</option>
    </select>
  </div>
 <div data-role="fieldcontain">
    <label for="email">Логин</label>
    <input type="text" name="email" placeholder="yandex@yandex.ru" id="email" value=""  />
  </div>
  <div data-role="fieldcontain">
    <label for="pass">Пароль</label>
    <input type="password" name="pass" placeholder="12345678" id="pass" value=""  />
  </div>
  <!-- <input type="submit" value="Сохранить" data-icon="arrow-r"  data-iconpos="right"/> -->
  </fieldset>

<div data-role="collapsible" data-collapsed="true">
  <h1>Настройки записи по движению</h1>

  <fieldset data-role="collapsible">
  <legend>День</legend>
  <div data-role="fieldcontain">
    <label for="zap_dv_day">Запись по движению</label>
    <select name="zap_dv_day" id="zap_dv_day" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  
  <div data-role="fieldcontain">
    <label for="dlit_rol_dv_day">Длина записи (1-10) c</label>
    <input type="number" name="dlit_rol_dv_day" placeholder="4" id="dlit_rol_dv_day" value="4"  />
  </div>

  </fieldset>

<fieldset data-role="collapsible">
  <legend>Ночь</legend>
  <div data-role="fieldcontain">
    <label for="zap_dv_night">Запись по движению</label>
    <select name="zap_dv_night" id="zap_dv_night" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  <div data-role="fieldcontain">
    <label for="dlit_rol_dv_night">Длина записи (1-10) c</label>
    <input type="number" name="dlit_rol_dv_night" placeholder="4" id="dlit_rol_dv_night" value="4"  />
  </div>
  </fieldset>
</div>

   <div data-role="collapsible" data-collapsed="true">
  <h1>Настройка периодической записи</h1>
   <fieldset data-role="collapsible">
  <legend>День</legend>
  <div data-role="fieldcontain">
    <label for="per_zap_vkl_day">Периодическая запись</label>
    <select name="per_zap_vkl_day" id="per_zap_vkl_day" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  <div data-role="fieldcontain">
    <label for="per_zap_day">Период записи,через (min. 60) с</label>
    <input type="number" name="per_zap_day" id="per_zap_day" placeholder="120" value="120"  />
  </div>
  <div data-role="fieldcontain">
    <label for="prod_per_day">Длина записи (1-10) c</label>
    <input type="number" name="prod_per_day" placeholder="4" id="prod_per_day" value="4"  />
  </div>
  <!-- <input type="submit" value="Сохранить" data-icon="arrow-r"  data-iconpos="right"/> -->
  </fieldset>

<fieldset data-role="collapsible">
  <legend>Ночь</legend>
  <div data-role="fieldcontain">
    <label for="per_zap_vkl_night">Периодическая запись</label>
    <select name="per_zap_vkl_night" id="per_zap_vkl_night" data-role="slider">
      <option value="0">Выкл</option>
      <option value="1">Вкл.</option>
    </select>
  </div>
  <div data-role="fieldcontain">
    <label for="per_zap_night">Период записи, через (min. 60) с</label>
    <input type="number" name="per_zap_night" id="per_zap_night" placeholder="120" value="120"  />
  </div>
  <div data-role="fieldcontain">
    <label for="prod_per_night">Длина записи (1-10) c</label>
    <input type="number" name="prod_per_night" placeholder="4" id="prod_per_night" value="4"  />
  </div>
  </fieldset>
</div>

  <input type="submit" value="Сохранить" data-icon="arrow-r"  data-iconpos="right"/>
</div>
<div data-role="footer"  data-position="fixed">
   <a href="index.html" data-role="button" data-icon="back" rel="external">Назад</a>
</div>
</form>
</div>
</body>
<script type="text/javascript" language="javascript">

 function call() {
      var msg   = $('#forms').serialize();
        $.ajax({type: 'POST',url: 'cgi-bin/ini.cgi',data: msg,success: function(data) {$('.results').html(data);},error:  function(xhr, str){alert('Ошибка: ' + xhr.responseCode);}});
$("body").addClass('ui-disabled');
$.mobile.loading("show",{
text: "Подождите",
textVisible: true,
theme: "b"
});
	setTimeout(function(){
	location.reload();
	}, 5000);
    }
	
function call1() {
      var msg   = $('#forms1').serialize();
        $.ajax({type: 'POST',url: 'cgi-bin/inin.cgi',data: msg,success: function(data) {$('.results').html(data);},error:  function(xhr, str){alert('Ошибка: ' + xhr.responseCode);}});
		$("body").addClass('ui-disabled');
$.mobile.loading("show",{
text: "Подождите",
textVisible: true,
theme: "b"
});
	setTimeout(function(){
	location.reload();
	}, 5000);
    }
function call3() {
      var msg   = $('#forms3').serialize();
        $.ajax({type: 'POST',url: 'cgi-bin/range.cgi',data: msg,success: function(data) {$('.results').html(data);},error:  function(xhr, str){alert('Ошибка: ' + xhr.responseCode);}});
$("body").addClass('ui-disabled');
$.mobile.loading("show",{
text: "Подождите",
textVisible: true,
theme: "b"
});
	setTimeout(function(){
	location.reload();
	}, 5000);
    }
   function home() {
	document.location.href = "index.html";
}
function ini() {
//$.ajax({type: 'POST',url: 'cgi-bin/date_ret.cgi',error:  function(xhr, str){alert('Ошибка: ' + xhr.responseCode);}});
//function gettime(){
//	$.ajax({
//	  url: 'cgi-bin/test.cgi',
//	  success: function(data) {
//	    document.getElementById('time').value = data;
//	  }
//	});
//}; 
 setInterval(function() {
 $.ajax({
	   url: 'cgi-bin/test.cgi',
	   success: function(data) {
	 document.getElementById('timetext').value = data;
	   }
	 });}, 1000);

if (rec_st == 1) $("#rec_st option[value='1']").prop("selected",true);
else $("#rec_st option[value='0']").prop("selected",true);
$("#rec_st").slider('refresh');

if (zap_dv_day_st == 1) $("#zap_dv_day_st option[value='1']").prop("selected",true)
else $("#zap_dv_day_st option[value='0']").prop("selected",true);
$("#zap_dv_day_st").slider('refresh');

if (zap_dv_night_st == 1) $("#zap_dv_night_st option[value='1']").prop("selected",true)
else $("#zap_dv_night_st option[value='0']").prop("selected",true);
$("#zap_dv_night_st").slider('refresh');


if (per_zap_vkl_day_st == 1) $("#per_zap_vkl_day_st option[value='1']").prop("selected",true)
else $("#per_zap_vkl_day_st option[value='0']").prop("selected",true);
$("#per_zap_vkl_day_st").slider('refresh');

if (per_zap_vkl_night_st == 1) $("#per_zap_vkl_night_st option[value='1']").prop("selected",true)
else $("#per_zap_vkl_night_st option[value='0']").prop("selected",true);
$("#per_zap_vkl_night_st").slider('refresh');

//#################################################

if (rec_cl == 1) $("#rec_cl option[value='1']").prop("selected",true)
else $("#rec_cl option[value='0']").prop("selected",true);
$("#rec_cl").slider('refresh');

if (zap_dv_day == 1) $("#zap_dv_day option[value='1']").prop("selected",true)
else $("#zap_dv_day option[value='0']").prop("selected",true);
$("#zap_dv_day").slider('refresh');

if (zap_dv_night == 1) $("#zap_dv_night option[value='1']").prop("selected",true)
else $("#zap_dv_night option[value='0']").prop("selected",true);
$("#zap_dv_night").slider('refresh');


if (per_zap_vkl_day == 1) $("#per_zap_vkl_day option[value='1']").prop("selected",true)
else $("#per_zap_vkl_day option[value='0']").prop("selected",true);
$("#per_zap_vkl_day").slider('refresh');

if (per_zap_vkl_night == 1) $("#per_zap_vkl_night option[value='1']").prop("selected",true)
else $("#per_zap_vkl_night option[value='0']").prop("selected",true);
$("#per_zap_vkl_night").slider('refresh');

if (service == 1) $("#service option[value='1']").prop("selected",true)
	else
		if (service == 2) $("#service option[value='2']").prop("selected",true)
			else $("#service option[value='3']").prop("selected",true);
			
document.getElementById('dlit_rol_dv_day_st').value = dlit_rol_dv_day_st;
document.getElementById('dlit_rol_dv_night_st').value = dlit_rol_dv_night_st;
document.getElementById('per_zap_day_st').value = per_zap_day_st;
document.getElementById('prod_per_day_st').value = prod_per_day_st;
document.getElementById('per_zap_night_st').value = per_zap_night_st;
document.getElementById('prod_per_night_st').value = prod_per_night_st;

document.getElementById('email').value = email;
document.getElementById('pass').value = pass;
document.getElementById('dlit_rol_dv_day').value = dlit_rol_dv_day;
document.getElementById('dlit_rol_dv_night').value = dlit_rol_dv_night;
document.getElementById('per_zap_day').value = per_zap_day;
document.getElementById('prod_per_day').value = prod_per_day;
//document.getElementById('date').value = date;
//document.getElementById('time').value = time;
document.getElementById('rangea').value = rangea;
document.getElementById('rangeb').value = rangeb;
document.getElementById('per_zap_night').value = per_zap_night;
document.getElementById('prod_per_night').value = prod_per_night;

}
</script>
</html>
